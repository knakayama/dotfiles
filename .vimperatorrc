"""""""""""""""""
" Plugin Settings
"""""""""""""""""

set rtp=~/.vimperator
source ~/.vimperator/vimppm/plugin/vimppm.js
vimppm 'knakayama/websearch.vimpr'
vimppm 'copy.js'
vimppm 'caret-hint.js'
vimppm 'history-search-backward.js'
vimppm 'pushfind.js'
vimppm 'slideshare.js'

" sugilog/websearch.vimpr
javascript <<EOT
liberator.globalVariables.webSearchTemplates = [
  {
    names: ['ghrepo'],
    description: 'search github.com for repository',
    url: 'https://github.com/search?utf8=%E2%9C%93&q=%KEYWORD%'
  },
  {
    names: ['ghcode'],
    description: 'search github.com for code',
    url: 'https://github.com/search?q=%KEYWORD%&type=Code&utf8=%E2%9C%93'
  },
  {
    names: ['amazon'],
    description: 'search amazon.co.jp',
    url: 'http://www.amazon.co.jp/s/ref=nb_sb_noss_2?__mk_ja_JP=カタカナ&url=search-alias=aps&field-keywords=%KEYWORD%&rh=i:aps,k:%KEYWORD%'
  }
];
EOT

" slideshare.js
nnoremap -urls=www\\.slideshare\\.net l :slideshare next<CR>
nnoremap -urls=www\\.slideshare\\.net h :slideshare prev<CR>

" local config
source ~/.vimperatorrc.local

"""""""""""""""""
" Normal Settings
"""""""""""""""""

" try to stay in normal mode after loading a web page
set focuscontent

" editor
set editor="/usr/local/bin/mvim -f"

"Change browser title to firefox
set titlestring=Firefox

" use visualbell when error occur
set visualbell
highlight Bell display:none

" max showing line
set verbose=9

" show tabnumbers
set tabnumbers

" Use alphabet for hintchars
set hintchars=abcdefghijklmnopqrstuvwxyz

" show tab
set gui=noaddons,nomenu,nobookmarks,navigation,tabs

" items which are completed at the :open prompts
" s search engines and keyword URLs
" l firefox location bar entries (bookmarks and history sorted in an inteligent wary)
" b bookmarks
set complete=sl
" set suggestengines=google

" colorscheme
colorscheme indigo-fx3

" ignore case
set ignorecase

" open new window when you open web page which change your current window size
set popups=2

" Define which commands should output in a new tab by default => all
set newtab=all

" use vim like editing mode on text area?
"set noinsertmode

" always show status line
set statuslinevisibility=visible

""""""""""""""""""
" Key Map Settings
""""""""""""""""""

" map leader to comma
noremap , <Leader>

" tweak scroll length
noremap j 5j
noremap k 5k

" H -> left forward
" L -> right forward
" h -> forward
" l -> backward
nnoremap H 5h
nnoremap L 5l
nnoremap h <A-Left>
nnoremap l <A-Right>

" open web in undoes
nnoremap <Leader>u :undo<Space>

" add bookmark with dialog
"nnoremap <Leader>b <esc>:dialog addbookmark<CR>

" fast access to bookmarks
nnoremap <Leader>b :bmarks<Space>

" easy access to downloads
nnoremap <Leader>l :downloads<CR>

" easy access to addons
nnoremap <Leader>a :addons<CR>

" easy access to preferences
nnoremap <Leader>p :preferences<CR>

" switch css style sheet with ! command
nnoremap ! :set invusermode<CR>

" http://blog.ruedap.com/2010/12/31/vimperator-caret-hint-google
" fast search
" note:
" <Silent>: ommit stdout to cmd line
vnoremap <Silent> <C-g> y<Esc><Esc>P

" Restart browser
nnoremap <Leader>R :restart<CR>

" Reload ~/.vimperatorrc
nnoremap <Leader>r :source ~/.vimperatorrc<CR>

" fast access to history
nnoremap <Leader>h :history<Space>

" http://chroju89.hatenablog.jp/entry/2014/02/09/102914
"js<<EOT
"if(liberator.has("MacUnix")) {
"  liberator.execute("nnoremap d <M-w>");
"} else {
"  liberator.execute("nnoremap d <C-w>");
"}
"EOT

" search command history like emacs mode
cnoremap <C-p> <Down>
cnoremap <C-n> <Up>

" toggle gui
nnoremap <Leader>g :set gui=nomenu,tabs,nonavigation,noaddons,nobookmarks<CR>
nnoremap <Leader>G :set gui=nomenu,tabs,navigation,noaddons,nobookmarks<CR>

""""""""""""""""""
" Mark
""""""""""""""""""

" Gmail
qmark m https://mail.google.com/mail/

" feedly
qmark f https://feedly.com

" Remember the milk
qmark r https://www.rememberthemilk.com

" My GitHub account
qmark k https://github.com/knakayama

""""""""""""""""""
" Ignore keys
""""""""""""""""""

" Gmail
ignorekeys add mail\.google\.com -except <C-n>,<C-p>,t,f,:

" Google Docs
ignorekeys add docs\.google\.com -except <C-n>,<C-p>,t,d,:

" remember the milk
ignorekeys add www\.rememberthemilk\.com -except <C-n>,<C-p>,:

" feedly
ignorekeys add feedly\.com -except <C-n>,<C-p>,t,f,d,:

" chatwork
ignorekeys add kcw\.kddi\.ne\.jp -except <C-n>,<C-p>,t,d,:

" remarkjs
ignorekeys add localhost:8000 -except <C-n>,<C-p>,r,f,d,:
ignorekeys add knakayama\.github\.io -except <C-n>,<C-p>,r,f,d,:

" Cacoo
ignorekeys add cacoo\.com -except <C-n>,<C-p>,:

""""""""""""""""""
" about:config
""""""""""""""""""
" http://chroju89.hatenablog.jp/entry/2014/02/09/102914
"
"set! network.dns.disableIPv6=true
"set! network.http.pipelining=true
"set! network.http.proxy.pipelining=true
"set! network.http.pipelining.maxrequests=8
"set! network.http.max-connections-per-server=32
"set! security.dialog_enable_delay=0
"set! browser.tabs.closeWindowWithLastTab=false
"set! browser.cache.memory.capacity=16384
"set! browser.sessionstore.interval=500000
"set! dom.popup_maximum=50
"set! browser.cache.disk.enable=false
"set! browser.cache.memory.capacity=-1
"set! layout.spellcheckDefault=0
"set! javascript.options.mem.high_water_mark=32

""""""""""""""""""
" about:config
""""""""""""""""""

echo "~/.vimperatorrc loaded."
